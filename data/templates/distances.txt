#!/bin/bash
#SBATCH --nodes=1
#SBATCH --gpus-per-node=v100l:1
#SBATCH --cpus-per-task=1 
#SBATCH --time=01-00:00:00
#SBATCH --output=log-%x-%j.out
#SBATCH --error=log-%x-%j.err
#SBATCH --mail-user=robin.moine456@gmail.com
#SBATCH --mail-type=ALL
#SBATCH --mem=64G 

# Capture the start time
start_time=$$(date +"%Y-%m-%d %H:%M:%S")

$imports

distance_name=$distance_name
interval_idx=$interval_idx
n_chunks=$n_chunks

python /scratch/$$USER/LineTracker/main.py compute_distances --distance_name=$$distance_name --interval_idx=$$interval_idx --n_chunks=$$n_chunks


# Capture the end time
end_time=$$(date +"%Y-%m-%d %H:%M:%S")

# Calculate and display the execution time
start_seconds=$$(date -d "$$start_time" '+%s')
end_seconds=$$(date -d "$$end_time" '+%s')
execution_time=$$((end_seconds - start_seconds))

echo "Execution time: $$execution_time seconds"
